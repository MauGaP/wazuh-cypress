# This is a basic workflow that is manually triggered

name: Manual workflow

# Controls when the action will run. Workflow runs when manually triggered using the UI
# or API.
on:
  workflow_dispatch:
    # Inputs the workflow accepts.
    inputs:
      wazuh-manager-image: 
        description: 'Version'
        default: '4.3'
        required: true
      wazuh-agent-image: 
        description: ''
        default: '4.3'
        required: true
      wazuh-version: 
        description: ''
        default: '4.3'
        required: true
      elastic-version: 
        description: ''
        default: '7.16.3'
        required: true
        

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  setup-wazuh-kibana-app:
    name: Run setup environment wazuh kibana app
    #runs-on: self-hosted
    runs-on: ubuntu-18.04
    #container: cypress/browsers:node12.18.0-chrome83-ff77
    steps:
     - name: Step 01 - Set up environment variables
       run: |
        #echo Base Branch: ${{ github.base_ref }}
        #echo Head Branch: ${{ github.head_ref }}
        #echo Run Test TRUE
        #echo "RUN_TEST=true" >> $GITHUB_ENV
        
        #echo "WAZUH_HEAD_BRANCH=${{ github.head_ref }}" >> $GITHUB_ENV
        #echo "${{ github.event.pull_request.body }}" > pull_request.body.txt
        
        echo "WAZUH_MANAGER_IMAGE=${{ wazuh-manager-image }}
        echo "WAZUH_AGENT_IMAGE=${{ wazuh-agent-image }}
        echo "WAZUH_VERSION=${{ wazuh-version }}
        echo "ELASTIC_VERSION=${{ elastic-version }}
        
        #echo "PATH_TEMPLATE_BASIC_CLUSTER_AGENT=$GITHUB_WORKSPACE/wazuh-app-environments/templates_elastic_prod/es_basic-wz_cluster-agent/" >> $GITHUB_ENV
        
